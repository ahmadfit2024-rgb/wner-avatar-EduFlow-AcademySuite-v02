{% raw %}{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "User Management" %}{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="h2">{% trans "User Management" %}</h1>
            <p class="text-muted">{% trans "Add, search, and manage all users on the platform." %}</p>
        </div>
        <a href="{% url 'users:user_add' %}" class="btn btn-primary">
            <i class="bi bi-plus-lg me-2"></i>{% trans "Add New User" %}
        </a>
    </div>

    <div class="card shadow-sm">
        <div class="card-header bg-light d-flex justify-content-between align-items-center flex-wrap gap-2">
            <h5 class="mb-0">{% trans "All Users" %}</h5>
            <div class="w-50" style="min-width: 300px;">
                <input 
                    type="search" 
                    name="q" 
                    class="form-control" 
                    placeholder="{% trans 'Search by name, email, or username...' %}"
                    hx-get="{% url 'users:user_management' %}"
                    hx-trigger="keyup changed delay:300ms, search"
                    hx-target="#user-list-container"
                    hx-indicator=".htmx-indicator"
                    value="{{ search_query }}"
                >
            </div>
        </div>
        <div id="user-list-container">
            {# The initial user list is rendered here by Django #}
            {% include 'partials/_user_list.html' with users=users is_search=is_search %}
        </div>
    </div>
</div>
{% endblock %}{% endraw %}